# ðŸš€ Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð¡ÐšÐ£Ð” Ð±Ð¾Ñ‚Ð° Ð½Ð° Linux ÑÐµÑ€Ð²ÐµÑ€

## ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ð´Ð»Ñ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ:

### 1. ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ° ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹
```bash
# ÐŸÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ð¼ Ð² Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
cd /home/SKUD_iogram

# ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ Ð¸ ÑƒÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Python
apt update
apt install -y python3 python3-pip python3-venv

# Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ð¾Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ðµ
python3 -m venv venv

# ÐÐºÑ‚Ð¸Ð²Ð¸Ñ€ÑƒÐµÐ¼ Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ð¾Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ðµ
source venv/bin/activate
```

### 2. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹
```bash
# ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ pip
pip install --upgrade pip

# Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð¾ÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸
pip install aiogram==3.13.1
pip install requests

# Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)
pip install pandas matplotlib seaborn xlsxwriter python-dotenv
```

### 3. Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ…
```bash
# Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸
mkdir -p data/reports

# Ð•ÑÐ»Ð¸ Ð½ÐµÑ‚ Ñ„Ð°Ð¹Ð»Ð° ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸ÐºÐ¾Ð², ÑÐ¾Ð·Ð´Ð°ÐµÐ¼ ÐµÐ³Ð¾
cat > data/employees.json << 'EOF'
{
    "992BEE97": "ÐŸÐ¾Ð»ÑÐºÐ¾Ð² ÐŸÐ°Ð²ÐµÐ»",
    "894046B8": "Ð¢Ð°Ñ€Ð°ÑÐ¾Ð² ÐÐ¸ÐºÐ¸Ñ‚Ð°", 
    "92C2001D": "ÐŸÐ¾Ð»ÑÐºÐ¾Ð² Ð”Ð¼Ð¸Ñ‚Ñ€Ð¸Ð¹",
    "E9DBA5A3": "Ð¨ÑƒÑ€Ð°",
    "296DD1A3": "ÐŸÑƒÑ‰Ð¸Ð½ÑÐºÐ¸Ð¹ ÐœÐ°Ñ€Ðº",
    "97D3A7DD": "ÐŸÐ°Ð»ÐºÐ¸Ð½ Ð¡ÐµÐ¼Ñ‘Ð½"
}
EOF

# Ð•ÑÐ»Ð¸ Ð½ÐµÑ‚ Ñ„Ð°Ð¹Ð»Ð° Ð¿Ð¾ÑÐµÑ‰Ð°ÐµÐ¼Ð¾ÑÑ‚Ð¸, ÑÐ¾Ð·Ð´Ð°ÐµÐ¼ ÐµÐ³Ð¾
cat > data/attendance.csv << 'EOF'
date,employee,arrival,departure
2025-01-08,ÐŸÐ¾Ð»ÑÐºÐ¾Ð² ÐŸÐ°Ð²ÐµÐ»,09:15,17:30
2025-01-08,Ð¢Ð°Ñ€Ð°ÑÐ¾Ð² ÐÐ¸ÐºÐ¸Ñ‚Ð°,08:45,18:00
EOF
```

### 4. ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ñ‚Ð¾ÐºÐµÐ½Ð° (Ð’ÐÐ–ÐÐž!)
```bash
# ÐžÑ‚Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ config.py Ð¸Ð»Ð¸ bot_simple.py
nano config.py
# Ð—Ð°Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ñ‚ÐµÑÑ‚Ð¾Ð²Ñ‹Ð¹ Ñ‚Ð¾ÐºÐµÐ½ Ð½Ð° Ð²Ð°Ñˆ Ð¿Ñ€Ð¾Ð´Ð°ÐºÑˆÐ½ Ñ‚Ð¾ÐºÐµÐ½
```

### 5. Ð—Ð°Ð¿ÑƒÑÐº Ð±Ð¾Ñ‚Ð°
```bash
# ÐŸÑ€Ð¾ÑÑ‚Ð¾Ð¹ Ð·Ð°Ð¿ÑƒÑÐº Ð´Ð»Ñ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ
source venv/bin/activate
python bot_simple.py

# ÐžÐ¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð°Ñ Ð²ÐµÑ€ÑÐ¸Ñ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð´Ð°ÐºÑˆÐµÐ½Ð°
python start_optimized.py

# Ð˜Ð»Ð¸ Ð¿Ð¾Ð»Ð½Ð°Ñ Ð²ÐµÑ€ÑÐ¸Ñ (Ð¼Ð¾Ð¶ÐµÑ‚ Ð½Ð°Ð³Ñ€ÑƒÐ¶Ð°Ñ‚ÑŒ CPU)
python bot.py
```

### 6. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð°Ð²Ñ‚Ð¾Ð·Ð°Ð¿ÑƒÑÐºÐ° (systemd service)
```bash
# ÐšÐ¾Ð¿Ð¸Ñ€ÑƒÐµÐ¼ service Ñ„Ð°Ð¹Ð»Ñ‹ (Ð¾Ð½Ð¸ ÑƒÐ¶Ðµ ÐµÑÑ‚ÑŒ Ð² Ð¿Ñ€Ð¾ÐµÐºÑ‚Ðµ)
cp skud-web.service /etc/systemd/system/
cp skud-bot.service /etc/systemd/system/

# ÐŸÐµÑ€ÐµÐ·Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼ systemd
systemctl daemon-reload

# Ð’ÐºÐ»ÑŽÑ‡Ð°ÐµÐ¼ Ð°Ð²Ñ‚Ð¾Ð·Ð°Ð¿ÑƒÑÐº Ð¾Ð±ÐµÐ¸Ñ… ÑÐ»ÑƒÐ¶Ð±
systemctl enable skud-web
systemctl enable skud-bot

# Ð—Ð°Ð¿ÑƒÑÐºÐ°ÐµÐ¼ ÑÐ»ÑƒÐ¶Ð±Ñ‹ (Ð²ÐµÐ±-ÑÐµÑ€Ð²ÐµÑ€ Ð¿ÐµÑ€Ð²Ñ‹Ð¼)
systemctl start skud-web
systemctl start skud-bot

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÑ‚Ð°Ñ‚ÑƒÑ
systemctl status skud-web
systemctl status skud-bot
```

### 7. ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³
```bash
# ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð»Ð¾Ð³Ð¾Ð² Ð²ÐµÐ±-ÑÐµÑ€Ð²ÐµÑ€Ð°
journalctl -u skud-web -f

# ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð»Ð¾Ð³Ð¾Ð² Ð±Ð¾Ñ‚Ð°
journalctl -u skud-bot -f

# ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð¾Ð±ÐµÐ¸Ñ… ÑÐ»ÑƒÐ¶Ð± Ð¾Ð´Ð½Ð¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾
journalctl -u skud-web -u skud-bot -f

# ÐžÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° ÑÐ»ÑƒÐ¶Ð±
systemctl stop skud-web skud-bot

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐº ÑÐ»ÑƒÐ¶Ð±
systemctl restart skud-web skud-bot

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¿Ð¾Ñ€Ñ‚Ð¾Ð²
netstat -tulpn | grep :5000  # Ð’ÐµÐ±-ÑÐµÑ€Ð²ÐµÑ€
```

## ðŸ› Ð ÐµÑˆÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼

### âš¡ Ð’Ñ‹ÑÐ¾ÐºÐ°Ñ Ð½Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð½Ð° CPU:
```bash
# Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½ÑƒÑŽ Ð²ÐµÑ€ÑÐ¸ÑŽ
systemctl stop skud-bot
systemctl edit skud-bot
# Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚Ðµ ExecStart Ð½Ð° start_optimized.py
systemctl restart skud-bot

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ€ÐµÑÑƒÑ€ÑÑ‹
systemctl status skud-bot
journalctl -u skud-bot --since "1 hour ago"
```

### ðŸ“± Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ Ð½Ðµ Ð¿Ñ€Ð¸Ñ…Ð¾Ð´ÑÑ‚:
```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ
python -c "from config import config; print(f'Token: {bool(config.TELEGRAM_TOKEN)}, Admin: {config.ADMIN_USER_ID}')"

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³Ð¸ Ð²ÐµÐ±-ÑÐµÑ€Ð²ÐµÑ€Ð°
journalctl -u skud-web -f

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³Ð¸ Ð±Ð¾Ñ‚Ð°
journalctl -u skud-bot -f

# Ð¢ÐµÑÑ‚ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ð¹ Ñ‡ÐµÑ€ÐµÐ· Ð²ÐµÐ±-ÑÐµÑ€Ð²ÐµÑ€
curl -X POST http://localhost:5000/api/attendance \
  -H "Content-Type: application/json" \
  -d '{"serial": "TEST123", "time": "2025-01-08 12:00:00"}'
```

### ðŸŒ Ð’ÐµÐ±-Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚:
```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð²ÐµÐ±-ÑÐµÑ€Ð²ÐµÑ€Ð°
systemctl status skud-web
journalctl -u skud-web --since "1 hour ago"

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ÑÑ‚Ð¸
curl http://localhost:5000/api/health

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¿Ð¾Ñ€Ñ‚Ð°
netstat -tulpn | grep :5000
```

### ðŸ“± Telegram WebApp Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚:
```bash
# Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ Ñ‡Ñ‚Ð¾ Ð²ÐµÐ±-ÑÐµÑ€Ð²ÐµÑ€ Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½ Ð¿Ð¾ HTTPS
curl https://skud-ek.ru/telegram-reports

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð´Ð¾Ð¼ÐµÐ½Ð°
# WebApp Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ HTTPS Ð´Ð¾Ð¼ÐµÐ½Ð°Ð¼Ð¸
```

### Ð•ÑÐ»Ð¸ aiogram Ð½Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ð»ÑÑ:
```bash
# ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ð´Ñ€ÑƒÐ³ÑƒÑŽ Ð²ÐµÑ€ÑÐ¸ÑŽ
pip install aiogram==3.10.0

# Ð˜Ð»Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ñ‡ÐµÑ€ÐµÐ· apt
apt install python3-aiogram
```

### Ð•ÑÐ»Ð¸ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ Ñ pandas/matplotlib:
```bash
# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ðµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸
apt install python3-pandas python3-matplotlib python3-seaborn

# Ð˜Ð»Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ bot_simple.py Ð±ÐµÐ· ÑÑ‚Ð¸Ñ… Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹
```

### ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ð±Ð¾Ñ‚Ð°:
```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼, Ñ‡Ñ‚Ð¾ Ð¿Ñ€Ð¾Ñ†ÐµÑÑ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½
ps aux | grep bot

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÐµÑ‚ÐµÐ²Ñ‹Ðµ ÑÐ¾ÐµÐ´Ð¸Ð½ÐµÐ½Ð¸Ñ
netstat -tulpn | grep python

# Ð¢ÐµÑÑ‚ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ð°
python -c "import aiogram; print('OK')"

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¿Ð°Ð¼ÑÑ‚Ð¸
free -h
top -p $(pgrep -f "python.*bot")
```

## âœ… Ð“Ð¾Ñ‚Ð¾Ð²Ð¾!

ÐŸÐ¾ÑÐ»Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ ÑÑ‚Ð¸Ñ… ÐºÐ¾Ð¼Ð°Ð½Ð´ Ð±ÑƒÐ´ÑƒÑ‚ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ Ð´Ð²Ðµ ÑÐ»ÑƒÐ¶Ð±Ñ‹:

**ðŸŒ skud-web** - Ð²ÐµÐ±-ÑÐµÑ€Ð²ÐµÑ€ Ð½Ð° Ð¿Ð¾Ñ€Ñ‚Ñƒ 5000:
- Ð’ÐµÐ±-Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ Ð½Ð° skud-ek.ru
- API Ð´Ð»Ñ ESP32 (/api/attendance)  
- Telegram WebApp Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ (/telegram-reports)
- Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ Ð¾Ñ‚Ñ‡ÐµÑ‚Ð¾Ð²

**ðŸ¤– skud-bot** - Telegram Ð±Ð¾Ñ‚:
- ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ð² Telegram Ñ‡Ð°Ñ‚Ðµ
- Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ Ð¾ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸ÑÑ… Ð¡ÐšÐ£Ð”
- WebApp Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ
- Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ Ð¾Ñ‚Ñ‡ÐµÑ‚Ð¾Ð² Ñ‡ÐµÑ€ÐµÐ· Ð±Ð¾Ñ‚

ÐžÐ±Ðµ ÑÐ»ÑƒÐ¶Ð±Ñ‹ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð·Ð°Ð¿ÑƒÑÐºÐ°ÑŽÑ‚ÑÑ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÐ·Ð°Ð³Ñ€ÑƒÐ·ÐºÐµ ÑÐµÑ€Ð²ÐµÑ€Ð°.
